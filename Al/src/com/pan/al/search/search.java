package com.pan.al.search;

import java.util.Arrays;

/**
 * æŸ¥æ‰¾å®šä¹‰ï¼šæ ¹æ®ç»™å®šçš„æŸä¸ªå€¼ï¼Œåœ¨æŸ¥æ‰¾è¡¨ä¸­ç¡®å®šä¸€ä¸ªå…¶å…³é”®å­—ç­‰äºç»™å®šå€¼çš„æ•°æ®å…ƒç´ ï¼ˆæˆ–è®°å½•ï¼‰
 *
 *                   é™æ€æŸ¥æ‰¾è¡¨
 *
 */
public class search {
    /**
     * â‘ é¡ºåºæŸ¥æ‰¾ (Sequential Search) åˆå«çº¿æ€§æŸ¥æ‰¾ï¼Œ
     * æ˜¯æœ€åŸºæœ¬çš„æŸ¥æ‰¾æŠ€æœ¯ï¼Œ å®ƒçš„æŸ¥æ‰¾è¿‡ç¨‹æ˜¯:ä»è¡¨ä¸­ç¬¬ä¸€ä¸ª(æˆ–æœ€åä¸€ä¸ª)è®°å½•å¼€å§‹ï¼Œ
     * é€ä¸ªè¿›è¡Œè®°å½•çš„å…³é”®å­—å’Œç»™å®šå€¼æ¯”è¾ƒï¼Œè‹¥æŸä¸ªè®°å½•çš„å…³é”®å­—å’Œç»™å®šå€¼ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼Œ
     * æ‰¾åˆ°æ‰€æŸ¥çš„è®°å½•;å¦‚æœç›´åˆ°æœ€åä¸€ä¸ª(æˆ–ç¬¬ä¸€ä¸ª)è®°å½•ï¼Œå…¶å…³é”®å­—å’Œç»™å®šå€¼æ¯”è¾ƒéƒ½ä¸ç­‰æ—¶ï¼Œ
     * åˆ™è¡¨ä¸­æ²¡æœ‰æ‰€æŸ¥çš„è®°å½•ï¼ŒæŸ¥æ‰¾ä¸æˆåŠŸã€‚
     *
     * @param a   æ•°ç»„
     * @param key å¾…æŸ¥æ‰¾å…³é”®å­—
     * @return å…³é”®å­—ä¸‹æ ‡
     */
    public static int sequentialSearch(int[] a, int key) {
        for (int i = 0; i < a.length; i++) {
            if (a[i] == key)
                return i;
        }
        return -1;
    }
    //æ”¹è¿›ï¼Œè®¾ç½®å“¨å…µ

    /**
     * æœ‰å“¨å…µé¡ºåºæŸ¥æ‰¾
     *
     * @param a   æ•°ç»„(ä¸‹æ ‡ä¸º0å­˜æ”¾å“¨å…µå…ƒç´ )
     * @param key å¾…æŸ¥è¯¢å…³é”®å­—
     * @return å…³é”®å­—ä¸‹æ ‡ è¿”å›0 åˆ™æœªæ‰¾åˆ°
     */
    public static int sequentialSearch2(int[] a, int key) {
        int index = a.length - 1;
        a[0] = key;// å°†ä¸‹æ ‡ä¸º0çš„æ•°ç»„å…ƒç´ è®¾ç½®ä¸ºå“¨å…µ
        while (a[index] != key) {
            index--;
        }
        return index;
    }

    /**
     â‘¡æŠ˜åŠæŸ¥æ‰¾(Binary Search)æŠ€æœ¯ï¼Œåˆç§°ä¸ºäºŒåˆ†æŸ¥æ‰¾ã€‚
     å®ƒçš„å‰ææ˜¯çº¿æ€§è¡¨ä¸­çš„è®°å½•å¿…é¡»æ˜¯å…³é”®ç æœ‰åº(é€šå¸¸ä»å°åˆ°å¤§æœ‰åº) ï¼Œ
     çº¿æ€§è¡¨å¿…é¡»é‡‡ç”¨é¡ºåºå­˜å‚¨ã€‚æŠ˜åŠæŸ¥æ‰¾çš„åŸºæœ¬æ€æƒ³æ˜¯:åœ¨æœ‰åºè¡¨ä¸­ï¼Œå–ä¸­é—´è®°å½•ä½œä¸ºæ¯”è¾ƒå¯¹è±¡ï¼Œ
     è‹¥ç»™å®šå€¼ä¸ä¸­é—´è®°å½•çš„å…³é”®å­—ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸ;è‹¥ç»™å®šå€¼å°äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œ
     åˆ™åœ¨ä¸­é—´è®°å½•çš„å·¦åŠåŒºç»§ç»­æŸ¥æ‰¾;è‹¥ç»™å®šå€¼å¤§äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å³åŠåŒºç»§ç»­æŸ¥æ‰¾ã€‚
     ä¸æ–­é‡å¤ä¸Š è¿°è¿‡ç¨‹ï¼Œç›´åˆ°æŸ¥æ‰¾æˆåŠŸï¼Œæˆ–æ‰€æœ‰æŸ¥æ‰¾åŒºåŸŸæ— è®°å½•ï¼ŒæŸ¥æ‰¾å¤±è´¥ä¸ºæ­¢ã€‚

     */
    /**
     * è¿­ä»£çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•
     * T(n)=T(n/2)+ğŸ˜€(1)  T(n)=O(logn)
     *
     * @param A
     * @param n
     * @param data
     * @return
     */
    public int BinarySearchIterative(int A[], int n, int data) {
        int low = 0;
        int high = n - 1;
        while (low < high) {
            int mid = low + (high - low) / 2;
            if (A[mid] == data) {
                return mid;
            } else if (A[mid] > data) {
                low = mid + 1;
            } else {
                high = mid - 1;
            }
        }
        return -1;
    }

    //é€’å½’ç‰ˆäºŒåˆ†æŸ¥æ‰¾

    public int BinarySearchRecursive(int A[], int low, int high, int data) {
        int mid = low + (high + low) / 2;
        if (A[mid] == data) return mid;
        else if (A[mid] < data)
            return BinarySearchRecursive(A, mid + 1, high, data);
        else return BinarySearchRecursive(A, low, mid - 1, data);
    }

    /**
     * â‘¢æ’å€¼æŸ¥æ‰¾
     *   æ’å€¼æŸ¥æ‰¾(Interpolation Search)æ˜¯æ ¹æ®è¦æŸ¥æ‰¾çš„å…³é”®å­— key
     *   ä¸æŸ¥æ‰¾è¡¨ä¸­æœ€å¤§æœ€å°è®°å½•çš„å…³é”®å­—æ¯”è¾ƒåçš„æŸ¥æ‰¾æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒå°±åœ¨äºæ’å€¼çš„è®¡ç®—å…¬å¼
     *   (key - a[low])/(a[high] - a[low])ã€‚
     *   åº”è¯¥è¯´ï¼Œä»æ—¶é—´å¤æ‚åº¦æ¥çœ‹ï¼Œå®ƒä¹Ÿæ˜¯O(logn)ï¼Œä½†å¯¹äºè¡¨é•¿è¾ƒå¤§ï¼Œ
     *   è€Œå…³é”®å­—åˆ†å¸ƒåˆæ¯”è¾ƒå‡åŒ€çš„æŸ¥æ‰¾è¡¨æ¥è¯´ï¼Œæ’å€¼æŸ¥æ‰¾ç®—æ³•çš„å¹³å‡æ€§èƒ½æ¯”æŠ˜åŠæŸ¥æ‰¾è¦å¥½å¾—å¤š
     *   åä¹‹ï¼Œ æ•°ç»„ä¸­å¦‚æœåˆ†å¸ƒç±»ä¼¼{0ï¼Œ1ï¼Œ2ï¼Œ2000ï¼Œ2001ï¼Œ.......,999998, 999999}
     *   è¿™ç§æç«¯ä¸å‡åŒ€çš„æ•°æ®ï¼Œç”¨æ’å€¼æŸ¥æ‰¾æœªå¿…æ˜¯å¾ˆåˆé€‚çš„é€‰æ‹©
     *
     *   mid = low + ((key - a[low])/(a[high] - a[low]))(high - low);
     */

    /**
     * æ’å€¼æŸ¥æ‰¾
     *
     * @param a   æ•°ç»„
     * @param key å¾…æŸ¥æ‰¾å…³é”®å­—
     * @return è¿”å›æŠ˜åŠä¸‹æ ‡ï¼Œ -1è¡¨ç¤ºä¸å­˜åœ¨è¯¥å…³é”®å­—
     */
    public static int interpolationSearch(int[] a, int key) {
        int low, mid, high;
        low = 0;// æœ€å°ä¸‹æ ‡
        high = a.length - 1;// æœ€å¤§å°æ ‡
        while (low < high) {
            mid = low + (high - low) * (key - a[low]) / (a[high] - a[low]);
            // mid = (high + low) / 2;// æŠ˜åŠä¸‹æ ‡
            if (key > a[mid]) {
                low = mid + 1; // å…³é”®å­—æ¯” æŠ˜åŠå€¼ å¤§ï¼Œåˆ™æœ€å°ä¸‹æ ‡ è°ƒæˆ æŠ˜åŠä¸‹æ ‡çš„ä¸‹ä¸€ä½
            } else if (key < a[mid]) {
                high = mid - 1;// å…³é”®å­—æ¯” æŠ˜åŠå€¼ å°ï¼Œåˆ™æœ€å¤§ä¸‹æ ‡ è°ƒæˆ æŠ˜åŠä¸‹æ ‡çš„å‰ä¸€ä½
            } else {
                return mid; // å½“ key == a[mid] è¿”å› æŠ˜åŠä¸‹æ ‡
            }
        }
        return -1;
    }

    /**
     * â‘£ æ–æ³¢é‚£å¥‘æŸ¥æ‰¾
     * åˆ©ç”¨æœ€è¿‘æŸ¥æ‰¾é•¿åº¦çš„æ–æ³¢é‚£å¥‘æ•°å€¼æ¥ç¡®å®šæ‹†åˆ†ç‚¹
     * ä¸€ä¸ªæœ‰åºè¡¨çš„å…ƒç´ ä¸ºnï¼Œä¸”næ­£å¥½æ˜¯F(K)-1,æ‰èƒ½ç”¨è¿™ä¸ªæ–¹æ³•ï¼›
     * ç”ŸæˆæŒ‡å®šé•¿åº¦çš„æ–æ³¢æ•°åˆ—
     *
     * @param length
     * @return
     */
    public static int[] makeFbArray(int length) {
        int[] array = null;
        if (length > 2) {
            array = new int[length];
            array[0] = 1;
            array[1] = 1;
            for (int i = 2; i < length; i++) {
                array[i] = array[i - 1] + array[i - 2];//åé¢çš„å…³é”®
            }
        }
        return array;
    }

    /**
     * æ–æ³¢é‚£å¥‘æŸ¥æ‰¾(é»„é‡‘åˆ†å‰²åŸç†)
     *       å¹³å‡æ€§èƒ½æ¯”æŠ˜åŠæŸ¥æ‰¾å¥½ï¼Œä½†æœ€åæƒ…å†µçš„æ€§èƒ½æ¯”æŠ˜åŠæŸ¥æ‰¾å·®ï¼›
     * è¿™é‡Œå¾—æ³¨æ„ï¼Œå¦‚æœnåˆšå¥½ç­‰äºF[k]-1,å¾…æŸ¥æ‰¾æ•°ç»„åˆšå¥½æ‹†æˆF[k-1]å’ŒF[k-2]ä¸¤éƒ¨åˆ†ï¼Œ
     * é‚£ä¸‡äº‹å¤§å‰ä½ å¥½æˆ‘å¥½ï¼›ç„¶è€Œå¤§å¤šæ•°æƒ…å†µå¹¶ä¸èƒ½å°½äººæ„ï¼Œnä¼šå°äºF[k]-1,
     * è¿™æ—¶å€™å¯ä»¥æ‹†æˆå®Œæ•´F[k-1]å’Œæ®‹ç–¾çš„F[k-2]ä¸¤éƒ¨åˆ†ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ
     *
     * èªæ˜çš„å‰è¾ˆä»¬æ—©å·²æƒ³å¥½äº†è§£å†³åŠæ³•ï¼Œå¯¹äº†ï¼Œ
     * å°±æ˜¯è¡¥é½ï¼Œç”¨æœ€å¤§çš„æ•°æ¥å¡«å……F[k-2]çš„æ®‹ç¼ºéƒ¨åˆ†ï¼Œ
     * å¦‚æœæŸ¥æ‰¾çš„ä½ç½®è½åˆ°è¡¥é½çš„éƒ¨åˆ†ï¼Œé‚£å°±å¯ä»¥ç¡®å®šè¦æ‰¾çš„é‚£ä¸ªæ•°å°±æ˜¯æœ€åä¸€ä¸ªæœ€å¤§çš„äº†ã€‚
     *ã€
     * @param a
     * @param key
     * @param fblength
     * @return
     */
    public static int fibonaciSearch(int[] a, int key, int fblength) {
        int low, mid, high, k;
        low = 0;
        high = a.length - 1;
        int f[] = makeFbArray(fblength);//æ„å»ºæ–æ³¢é‚£å¥‘æ•°åˆ—
        // æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸‹æ ‡
        k = 0;
        // è·å–æ–æ³¢é‚£å¥‘åˆ†å‰²å€¼ä¸‹æ ‡
        while (high > f[k] - 1)
            k++;
        // åˆ©ç”¨Javaå·¥å…·ç±»Arraysæ„é€ é•¿åº¦ä¸ºf[k]çš„æ–°æ•°ç»„å¹¶æŒ‡å‘å¼•ç”¨a
        a = Arrays.copyOf(a, f[k] - 1);
        // å¯¹æ–°æ•°ç»„åé¢å¤šä½™çš„å…ƒç´ èµ‹å€¼æœ€å¤§çš„å…ƒç´ 
        for (int i = a.length; i < f[k] - 1; i++) {
            a[i] = a[high];//å½“keyæ˜¯æœ€å¤§å€¼æ—¶å€™ï¼Œé˜²æ­¢è§’æ ‡è¶Šç•Œå¼‚å¸¸
        }
        while (low <= high) {
            int middle = low + f[k - 1] - 1;
            if (a[middle] > key) {
                high = middle - 1;
                k = k - 1;
            } else if (a[middle] < key) {
                low = middle + 1;
                k = k - 2;
            } else {
                if (middle <= high) {
                    return middle;// è‹¥ç›¸ç­‰åˆ™è¯´æ˜midå³ä¸ºæŸ¥æ‰¾åˆ°çš„ä½ç½® }
                } else {
                    return high;// middleçš„å€¼å·²ç»å¤§äºhight,è¿›å…¥æ‰©å±•æ•°ç»„çš„å¡«å……éƒ¨åˆ†,å³æœ€åä¸€ä¸ªæ•°å°±æ˜¯è¦æŸ¥æ‰¾çš„æ•°ã€‚
                }
            }
        }
        return -1;
    }

    /**
     * â‘¤ç´¢å¼•é¡ºåºè¡¨çš„æŸ¥æ‰¾ï¼ˆåˆ†å—æŸ¥æ‰¾ï¼‰
     *     åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œé™¤äº†è¡¨æœ¬èº«ä»¥å¤–ï¼Œè¿˜éœ€è¦å»ºç«‹ä¸€ä¸ªç´¢å¼•è¡¨
     *     å¯¹äºæ¯ä¸ªå­è¡¨å»ºç«‹ä¸€ä¸ªç´¢å¼•é¡¹ï¼Œå…¶ä¸­åŒ…æ‹¬ä¿©é¡¹ï¼š
     *       1ï¼‰å…³é”®å­—é¡¹ï¼ˆå­è¡¨ä¸­æœ€å¤§çš„å…³é”®å­—ï¼‰
     *       2ï¼‰æŒ‡é’ˆé¡¹ï¼ˆæŒ‡å‘è¯¥å­è¡¨ä¸­ç¬¬ä¸€ä¸ªè®°å½•åœ¨è¡¨ä¸­çš„ä½ç½®ï¼‰
     *    ç´¢å¼•è¡¨æŒ‰å…³é”®å­—æœ‰åºï¼Œåˆ™è¡¨æˆ–è€…æœ‰åºæˆ–è€…åˆ†å—æœ‰åºï¼›
     *    æ‰€è°“åˆ†å—æœ‰åºå€¼å¾—æ˜¯ç¬¬äºŒä¸ªè¡¨ä¸­æ‰€æœ‰çš„è®°å½•çš„å…³é”®å­—å‡å¤§äºç¬¬ä¸€ä¸ªå­è¡¨ä¸­æ‰€æœ‰çš„å…³é”®å­—ï¼Œä»¥æ­¤ç±»æ¨ï¼›
     *
     *    æ‰€æœ‰åˆ†å—æŸ¥æ‰¾è¿‡ç¨‹éœ€è¦ä¿©æ­¥ï¼Œå…ˆç¡®å®šå¾…æŸ¥è®°å½•æ‰€åœ¨å­è¡¨ï¼Œç„¶ååœ¨å—ä¸­é¡ºåºæŸ¥æ‰¾
     *
     */
}
